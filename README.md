# Тестовое задание для позиции Junior Python веб-разработчика

## Цель: Разработать небольшой Django проект - чат с GPT на основе Rest Framework и OpenAI API.

### Задачи:

1. Создайте базовый проект на Django Rest Framework. Оно должно включать модели для сообщений, которые будут содержать
   информацию о тексте сообщения и временную метку.
2. Интеграция с OpenAI API. `OPENAI_API_KEY=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`
3. Используя предоставленный API-ключ и Chat Completions API, реализуйте функционал общения с моделью gpt-3.5-turbo.
   Имейте в виду, что вам потребуется подключить и настроить соответствующий SDK.
4. Реализуйте POST запрос. Этот запрос должен позволять пользователю отправлять сообщение в чат. Отправленное сообщение
   следует передать модели GPT через OpenAI API, получить от неё ответ, а затем сохранить оба сообщения в базе данных.
5. Реализуйте GET запрос. Этот запрос должен позволять получать список всех сообщений из базы данных.

### Ожидаемые результаты:

В результате мы ожидаем увидеть простое Django приложение позволяющее общаться с GPT, которое можно будет протестировать
используя API клиент (например Postman).

### Сдача работы:

Ссылка на GitHub репозиторий с вашим кодом.

### Дополнительная информация:

API ключ не должен быть включен в код приложения.

Примечание: API ключ предоставлен вам исключительно для целей этого задания и не должен использоваться в любых других
целях.

Сроки сдачи:
На выполнение дается 48 часов с момента получения этого тестового задания.

## Установка и запуск:

Для работы программы,
по примеру файла `.env.example` укажите ваш `OPENAI_API_KEY`

#### Клонируйте репозиторий

```bash
git clone https://github.com/joerude/codify-assignment-python.git
cd  codify-assignment-python
```

#### Активируйте виртуальное окружение

```bash
python3 -m venv .venv && . .venv/bin/activate 
pip install -r requirements.txt
```

#### Запустите миграции

```bash 
python3 manage.py makemigratons
python3 manage.py migrate
```

#### Запустите сервер

```bash
python3 manage.py runserver
```

## Документация API

### Создание нового сообщения

POST /api/messages/create/

#### Описание

Этот запрос позволяет пользователю отправить сообщение в чат. Отправленное сообщение будет передано модели GPT через
OpenAI API, получен ответ, а затем оба сообщения будут сохранены в базе данных.
Параметры запроса

```json
{
  "prompt_message": "Привет!"
}
```

- prompt_message: Текст сообщения, которое нужно отправить в чат.

#### Ответ

Статус: 201 Created

```json
{
  "id": 1,
  "prompt_message": "Привет!",
  "response": "Здравствуйте!",
  "created_at": "2023-06-09T12:37:45Z"
}
```

- id: Уникальный идентификатор созданного сообщения.
- prompt_message: Текст отправленного сообщения.
- response: Ответ, сгенерированный моделью GPT.
- created_at: Временная метка сообщения.


### Получение списка сообщений

`GET /api/messages/`

#### Описание

Этот запрос позволяет получить список всех сообщений из базы данных.

#### Параметры запроса

Нет.

#### Ответ

Статус: 200 OK

```json
{
  "count": 1,
  "next": null,
  "previous": null,
  "results": [
    {
      "id": 1,
      "prompt_message": "Привет!",
      "response": "Здравствуйте!",
      "timestamp": "2023-06-09T12:34:56Z"
    }
  ]
}
```

- count: Общее количество сообщений в базе данных.
- next: Ссылка на следующую страницу сообщений (если доступно).
- previous: Ссылка на предыдущую страницу сообщений (если доступно).
- results: Список сообщений. Каждое сообщение содержит следующие поля:
- id: Уникальный идентификатор сообщения.
- prompt_message: Текст исходного сообщения.
- response: Ответ, сгенерированный моделью GPT.
- created_at: Временная метка сообщения.

